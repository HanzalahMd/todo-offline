{"ast":null,"code":"/**\n * handle the en/decryption of documents-data\n */\nimport objectPath from 'object-path';\nimport { clone, pluginMissing } from './util';\nexport var Crypter =\n/*#__PURE__*/\nfunction () {\n  function Crypter(password, schema) {\n    this.password = password;\n    this.schema = schema;\n  }\n  /**\n   * encrypt and stringify data\n   * @overwritten by plugin (optional)\n   */\n\n\n  var _proto = Crypter.prototype;\n\n  _proto._encryptValue = function _encryptValue(_value) {\n    throw pluginMissing('encryption');\n  }\n  /**\n   * decrypt and json-parse an encrypted value\n   * @overwritten by plugin (optional)\n   */\n  ;\n\n  _proto._decryptValue = function _decryptValue(_value) {\n    throw pluginMissing('encryption');\n  };\n\n  _proto.encrypt = function encrypt(obj) {\n    var _this = this;\n\n    if (!this.password) return obj;\n    obj = clone(obj);\n    Object.keys(this.schema.encryptedPaths).forEach(function (path) {\n      var value = objectPath.get(obj, path);\n      if (typeof value === 'undefined') return;\n\n      var encrypted = _this._encryptValue(value);\n\n      objectPath.set(obj, path, encrypted);\n    });\n    return obj;\n  };\n\n  _proto.decrypt = function decrypt(obj) {\n    var _this2 = this;\n\n    if (!this.password) return obj;\n    obj = clone(obj);\n    Object.keys(this.schema.encryptedPaths).forEach(function (path) {\n      var value = objectPath.get(obj, path);\n      if (typeof value === 'undefined') return;\n\n      var decrypted = _this2._decryptValue(value);\n\n      objectPath.set(obj, path, decrypted);\n    });\n    return obj;\n  };\n\n  return Crypter;\n}();\nexport function create(password, schema) {\n  return new Crypter(password, schema);\n}\nexport default {\n  create: create,\n  Crypter: Crypter\n};","map":{"version":3,"sources":["/Users/Hanzalah/Desktop/github/todo-offline/rxdb-hasura-demo/node_modules/rxdb/dist/es/crypter.js"],"names":["objectPath","clone","pluginMissing","Crypter","password","schema","_proto","prototype","_encryptValue","_value","_decryptValue","encrypt","obj","_this","Object","keys","encryptedPaths","forEach","path","value","get","encrypted","set","decrypt","_this2","decrypted","create"],"mappings":"AAAA;;;AAGA,OAAOA,UAAP,MAAuB,aAAvB;AACA,SAASC,KAAT,EAAgBC,aAAhB,QAAqC,QAArC;AACA,OAAO,IAAIC,OAAO;AAAG;AAAa,YAAY;AAC5C,WAASA,OAAT,CAAiBC,QAAjB,EAA2BC,MAA3B,EAAmC;AACjC,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACD;AACD;;;;;;AAMA,MAAIC,MAAM,GAAGH,OAAO,CAACI,SAArB;;AAEAD,EAAAA,MAAM,CAACE,aAAP,GAAuB,SAASA,aAAT,CAAuBC,MAAvB,EAA+B;AACpD,UAAMP,aAAa,CAAC,YAAD,CAAnB;AACD;AACD;;;;AAHA;;AASAI,EAAAA,MAAM,CAACI,aAAP,GAAuB,SAASA,aAAT,CAAuBD,MAAvB,EAA+B;AACpD,UAAMP,aAAa,CAAC,YAAD,CAAnB;AACD,GAFD;;AAIAI,EAAAA,MAAM,CAACK,OAAP,GAAiB,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;AACrC,QAAIC,KAAK,GAAG,IAAZ;;AAEA,QAAI,CAAC,KAAKT,QAAV,EAAoB,OAAOQ,GAAP;AACpBA,IAAAA,GAAG,GAAGX,KAAK,CAACW,GAAD,CAAX;AACAE,IAAAA,MAAM,CAACC,IAAP,CAAY,KAAKV,MAAL,CAAYW,cAAxB,EAAwCC,OAAxC,CAAgD,UAAUC,IAAV,EAAgB;AAC9D,UAAIC,KAAK,GAAGnB,UAAU,CAACoB,GAAX,CAAeR,GAAf,EAAoBM,IAApB,CAAZ;AACA,UAAI,OAAOC,KAAP,KAAiB,WAArB,EAAkC;;AAElC,UAAIE,SAAS,GAAGR,KAAK,CAACL,aAAN,CAAoBW,KAApB,CAAhB;;AAEAnB,MAAAA,UAAU,CAACsB,GAAX,CAAeV,GAAf,EAAoBM,IAApB,EAA0BG,SAA1B;AACD,KAPD;AAQA,WAAOT,GAAP;AACD,GAdD;;AAgBAN,EAAAA,MAAM,CAACiB,OAAP,GAAiB,SAASA,OAAT,CAAiBX,GAAjB,EAAsB;AACrC,QAAIY,MAAM,GAAG,IAAb;;AAEA,QAAI,CAAC,KAAKpB,QAAV,EAAoB,OAAOQ,GAAP;AACpBA,IAAAA,GAAG,GAAGX,KAAK,CAACW,GAAD,CAAX;AACAE,IAAAA,MAAM,CAACC,IAAP,CAAY,KAAKV,MAAL,CAAYW,cAAxB,EAAwCC,OAAxC,CAAgD,UAAUC,IAAV,EAAgB;AAC9D,UAAIC,KAAK,GAAGnB,UAAU,CAACoB,GAAX,CAAeR,GAAf,EAAoBM,IAApB,CAAZ;AACA,UAAI,OAAOC,KAAP,KAAiB,WAArB,EAAkC;;AAElC,UAAIM,SAAS,GAAGD,MAAM,CAACd,aAAP,CAAqBS,KAArB,CAAhB;;AAEAnB,MAAAA,UAAU,CAACsB,GAAX,CAAeV,GAAf,EAAoBM,IAApB,EAA0BO,SAA1B;AACD,KAPD;AAQA,WAAOb,GAAP;AACD,GAdD;;AAgBA,SAAOT,OAAP;AACD,CA3DiC,EAA3B;AA4DP,OAAO,SAASuB,MAAT,CAAgBtB,QAAhB,EAA0BC,MAA1B,EAAkC;AACvC,SAAO,IAAIF,OAAJ,CAAYC,QAAZ,EAAsBC,MAAtB,CAAP;AACD;AACD,eAAe;AACbqB,EAAAA,MAAM,EAAEA,MADK;AAEbvB,EAAAA,OAAO,EAAEA;AAFI,CAAf","sourcesContent":["/**\n * handle the en/decryption of documents-data\n */\nimport objectPath from 'object-path';\nimport { clone, pluginMissing } from './util';\nexport var Crypter = /*#__PURE__*/function () {\n  function Crypter(password, schema) {\n    this.password = password;\n    this.schema = schema;\n  }\n  /**\n   * encrypt and stringify data\n   * @overwritten by plugin (optional)\n   */\n\n\n  var _proto = Crypter.prototype;\n\n  _proto._encryptValue = function _encryptValue(_value) {\n    throw pluginMissing('encryption');\n  }\n  /**\n   * decrypt and json-parse an encrypted value\n   * @overwritten by plugin (optional)\n   */\n  ;\n\n  _proto._decryptValue = function _decryptValue(_value) {\n    throw pluginMissing('encryption');\n  };\n\n  _proto.encrypt = function encrypt(obj) {\n    var _this = this;\n\n    if (!this.password) return obj;\n    obj = clone(obj);\n    Object.keys(this.schema.encryptedPaths).forEach(function (path) {\n      var value = objectPath.get(obj, path);\n      if (typeof value === 'undefined') return;\n\n      var encrypted = _this._encryptValue(value);\n\n      objectPath.set(obj, path, encrypted);\n    });\n    return obj;\n  };\n\n  _proto.decrypt = function decrypt(obj) {\n    var _this2 = this;\n\n    if (!this.password) return obj;\n    obj = clone(obj);\n    Object.keys(this.schema.encryptedPaths).forEach(function (path) {\n      var value = objectPath.get(obj, path);\n      if (typeof value === 'undefined') return;\n\n      var decrypted = _this2._decryptValue(value);\n\n      objectPath.set(obj, path, decrypted);\n    });\n    return obj;\n  };\n\n  return Crypter;\n}();\nexport function create(password, schema) {\n  return new Crypter(password, schema);\n}\nexport default {\n  create: create,\n  Crypter: Crypter\n};\n//# sourceMappingURL=crypter.js.map"]},"metadata":{},"sourceType":"module"}